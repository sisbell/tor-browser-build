diff --git a/app/build.gradle b/app/build.gradle
index 49cbdd20..38d9c91a 100644
--- a/app/build.gradle
+++ b/app/build.gradle
@@ -1,10 +1,9 @@
-apply plugin: 'com.android.application'
+apply plugin: 'com.android.library'
 
 android {
     compileSdkVersion 27
     buildToolsVersion '27.0.3'
     defaultConfig {
-        applicationId "org.torproject.android"
         minSdkVersion 16
         targetSdkVersion 27
     }
@@ -17,7 +16,6 @@ android {
     buildTypes {
         release {
             minifyEnabled true
-            shrinkResources true
             proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
         }
     }
@@ -32,7 +30,6 @@ android {
         fullperm {
             dimension "free"
             minSdkVersion 16
-            applicationId 'org.torproject.android'
             targetSdkVersion 27
             versionCode 16030020
             versionName '16.0.3-BETA-2-tor-0.3.4.8'
diff --git a/app/proguard-rules.txt b/app/proguard-rules.txt
index b1120f82..adcb0068 100644
--- a/app/proguard-rules.txt
+++ b/app/proguard-rules.txt
@@ -11,4 +11,9 @@
 -keep class okhttp3.** { *; }
 -keep interface okhttp3.** { *; }
 -dontwarn okhttp3.**
--dontwarn okio.**
\ No newline at end of file
+-dontwarn okio.**
+
+# Called from the Application subclass, ProGuard strips it because its not used
+-keep class org.torproject.android.settings.LocaleHelper {
+    public static android.content.Context onAttach(android.content.Context, java.lang.String);
+}
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
index 56db8266..afde9284 100644
--- a/app/src/main/AndroidManifest.xml
+++ b/app/src/main/AndroidManifest.xml
@@ -16,16 +16,11 @@
         android:required="false" />
 
     <application
-        android:name=".OrbotApp"
         android:allowBackup="false"
         android:allowClearUserData="true"
         android:configChanges="locale|orientation|screenSize"
         android:description="@string/app_description"
-        android:hardwareAccelerated="false"
-        android:icon="@drawable/ic_launcher"
-        android:label="@string/app_name"
         android:theme="@style/DefaultTheme"
-        tools:replace="android:allowBackup"
         >
         <activity
             android:name=".OrbotMainActivity"
@@ -33,8 +28,6 @@
             android:launchMode="singleTop">
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
-
-                <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
             <intent-filter>
                 <action android:name="android.intent.action.VIEW" />
@@ -82,12 +75,12 @@
 
         <service
             android:name=".service.TorService"
-            android:enabled="true"
+            android:enabled="false"
             android:permission="android.permission.BIND_VPN_SERVICE"
             android:stopWithTask="false"></service>
         <service
             android:name=".service.vpn.TorVpnService"
-            android:enabled="true"
+            android:enabled="false"
             android:permission="android.permission.BIND_VPN_SERVICE">
             <intent-filter>
                 <action android:name="android.net.VpnService" />
@@ -96,7 +89,7 @@
 
         <receiver
             android:name=".service.StartTorReceiver"
-            android:exported="true">
+            android:exported="false">
             <intent-filter>
                 <action android:name="org.torproject.android.intent.action.START" />
             </intent-filter>
@@ -104,7 +97,7 @@
         <receiver
             android:name=".OnBootReceiver"
             android:enabled="true"
-            android:exported="true">
+            android:exported="false">
             <intent-filter>
                 <action android:name="android.intent.action.BOOT_COMPLETED" />
 
@@ -131,20 +124,6 @@
                 android:value=".OrbotMainActivity" />
         </activity>
 
-        <provider
-            android:name=".ui.hiddenservices.providers.HSContentProvider"
-            android:authorities="org.torproject.android.ui.hiddenservices.providers"
-            android:exported="false" />
-        <provider
-            android:name="android.support.v4.content.FileProvider"
-            android:authorities="org.torproject.android.ui.hiddenservices.storage"
-            android:exported="false"
-            android:grantUriPermissions="true">
-            <meta-data
-                android:name="android.support.FILE_PROVIDER_PATHS"
-                android:resource="@xml/hidden_services_paths" />
-        </provider>
-
         <activity
             android:name=".ui.hiddenservices.ClientCookiesActivity"
             android:label="@string/client_cookies"
@@ -157,10 +136,6 @@
         <activity android:name=".ui.onboarding.OnboardingActivity"/>
         <activity android:name=".ui.onboarding.BridgeWizardActivity"/>
 
-        <provider
-            android:name=".ui.hiddenservices.providers.CookieContentProvider"
-            android:authorities="org.torproject.android.ui.hiddenservices.providers.cookie"
-            android:exported="false" />
     </application>
 
-</manifest>
\ No newline at end of file
+</manifest>
diff --git a/app/src/main/res/values-en-rGB/poestrings.xml b/app/src/main/res/values-en-rGB/poestrings.xml
index 62663670..d09c7d6a 100644
--- a/app/src/main/res/values-en-rGB/poestrings.xml
+++ b/app/src/main/res/values-en-rGB/poestrings.xml
@@ -14,7 +14,7 @@
     <string name="action_more">TELL ME MORE</string>
 
     <string name="vpn_setup">You can enable any app to go through Tor using our built-in VPN.</string>
-    <string name="vpn_setup_sub">This won\\'t make you anonymous, but it will help get through firewalls.</string>
+    <string name="vpn_setup_sub">This won\'t make you anonymous, but it will help get through firewalls.</string>
     <string name="action_vpn_choose">CHOOSE APPS</string>
 
     <string name="status_connected">Connected!</string>
diff --git a/orbotservice/src/main/java/org/torproject/android/service/TorService.java b/orbotservice/src/main/java/org/torproject/android/service/TorService.java
index fec88b1f..ced0bd9a 100644
--- a/orbotservice/src/main/java/org/torproject/android/service/TorService.java
+++ b/orbotservice/src/main/java/org/torproject/android/service/TorService.java
@@ -649,13 +649,10 @@ public class TorService extends Service implements TorServiceConstants, OrbotCon
         }
         
         extraLines.append("SOCKSPort ").append(socksPortPref).append(isolate).append('\n');
-        extraLines.append("SafeSocks 0").append('\n');
         extraLines.append("TestSocks 0").append('\n');
     	if (Prefs.openProxyOnAllInterfaces())
     		extraLines.append("SocksListenAddress 0.0.0.0").append('\n');
 
-        extraLines.append("HTTPTunnelPort ").append(mPortHTTP).append(isolate).append('\n');
-
 
 	if(prefs.getBoolean(OrbotConstants.PREF_CONNECTION_PADDING, false))
 	{
diff --git a/orbotservice/src/main/java/org/torproject/android/service/TorServiceConstants.java b/orbotservice/src/main/java/org/torproject/android/service/TorServiceConstants.java
index 4b62a6a8..270bc466 100644
--- a/orbotservice/src/main/java/org/torproject/android/service/TorServiceConstants.java
+++ b/orbotservice/src/main/java/org/torproject/android/service/TorServiceConstants.java
@@ -60,7 +60,7 @@ public interface TorServiceConstants {
 	
 	int CONTROL_PORT_DEFAULT = 9051;
     int HTTP_PROXY_PORT_DEFAULT = 8118; // like Privoxy!
-    int SOCKS_PROXY_PORT_DEFAULT = 9050;
+    int SOCKS_PROXY_PORT_DEFAULT = 9150;
 
     
 	//path to check Tor against
